<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="./bower_components/react/react.js"></script>
    <script src="./bower_components/react/JSXTransformer.js"></script>
    <title></title>
</head>
<body>
<div id="app">

</div>
<script type="text/jsx">

    var MessageBox = React.createClass({

        getInitialState: function(){

            return {
                isVisible: true,
                titleMessage: "你好世界（来自state）",
                subMessage: [
                    "coding",
                    'singing..',
                    'xxoo'
                ]
            }
        },

        render: function(){

            var styleObj = {
                display: this.state.isVisible ? "block" : "none"
            }

            return (
                    <div>
                        <h1 style={styleObj}>{this.state.titleMessage}</h1>
                        <SubMessageBox messages={this.state.subMessage}/>
                    </div>
            );
        }
    });

    var SubMessageBox = React.createClass({

        //定义类型
        propTypes: {
            messages: React.PropTypes.array,
        },

        /**
         * 默认的消息
         */
        getDefaultProps: function(){
            return {
                messages: ['默认的消息']
            };
        },

        render: function(){

            var msgs = [];

            this.props.messages.forEach(function(data, index){
                msgs.push(
                        <p>{index} : {data}</p>
                );
            });

            return (
                    <div>
                        <div>{msgs}</div>
                        <Footer/>
                    </div>
            );
        }
    });

    var Footer = React.createClass({
        render: function(){
            return(<h5>yyyyyyyy</h5>);
        }
    });

    var messageBox = React.render( <MessageBox />, document.getElementById("app"), function(){
        console.log("渲染完成啦!");
    });

    //messageBox.setState({titleMessage:"aaa"});
    //messageBox.forceUpdate();


</script>
</body>
</html>